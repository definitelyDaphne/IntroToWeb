<!--Page demonstrated history and use of javascript-->
<!--Author: Daphne Yu 22531975-->
<!--University of Western Australia CITS3403 Agile Web Development-->

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Intro to Web Technology</title>

	<!--third party link-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,500&display=swap" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>

	<!--relative link to files in repo-->
	<link href="main.css" rel="stylesheet">

	<!--page specific css style-->
	<style>
		em{
			color:blue;
			font-size: 2em;
			font-style:normal;
		}
		#content a{
			color:#188fa7;
			background-color: #e2dbbe;
		}
	</style>

	<script>
		function loadAJAX(param){
			//fetch API, please don't misuse my API key thanks
			//I will put that in .env if I'm gonna host it somewhere or make public
			const url = `https://api.themoviedb.org/3/search/movie?api_key=a12f81080f64afdcb1b3151b2cadcdac&language=en-US&query=${param}&page=1&include_adult=false`;
			
			fetch(url)
		  	.then((response) => {
		    	return response.json();
		  	})
		  	.then((data) => {
		    	console.log(data);
		    	let resultDiv = document.getElementById("result");
		    	resultDiv.innerHTML="";
		    	//resultDiv.innerHTML="yeet";
		    	data.results.forEach((result) => {
		    		let poster = document.createElement("img"),
		    		title = document.createElement("h3"),
		    		releaseDate = document.createElement("div"),
		    		overview = document.createElement("div");

		    		if(result.poster_path){
		    			poster.src=`https://image.tmdb.org/t/p/original${result.poster_path}`;
		    			poster.width=300;
		    			poster.alt="image cannot be display"

		    			title.innerHTML=`${result.title}`;
		    			releaseDate.innerHTML=`Release on:${result.release_date}`;
		    			overview.innerHTML=`${result.overview}`;
		    			overview.style.width="300px";

		    			resultDiv.appendChild(poster);
		    			resultDiv.appendChild(title);
		    			resultDiv.appendChild(releaseDate);
		    			resultDiv.appendChild(overview);
		    		}
		    		else{
		    			return
		    		}
		    		
		    		
		    	})
		    	

		  	})
		  	.catch((error) =>{
		  		console.log(error);
		  	});
		}
	</script>
</head>

<body>

	<div id="main"></div>
	<!--use jQuery to pull html layout element from a centralised js file-->
	<script type="text/javascript" src="js/layout.js"></script>
	<script type="text/javascript" src="js/section.js"></script>

	<script>
		let pageBanner = document.createElement('h1');
		pageBanner.innerHTML="JS";
		pageBanner.setAttribute('id','js');
		document.getElementById('content').appendChild(pageBanner);

		//add links to buttons in nav bar
		//ids are leftArrow, rightArrow and home
		addButtonLink("leftArrow","cssexplained.html");
		addButtonLink("rightArrow","");
		addButtonLink("home","");

		//function defined in section.js
		//create div of named id and put named title as the first child of that div
		createSectionInsideContent(["Brief Intro","Purpose & evolution","AJAX","DOM manipulation","Resources"]);

		//=============== SECTION DIVIDER ===============//
		let introDiv = document.getElementById("Brief Intro");
		introDiv.insertAdjacentHTML('beforeend',
			'<div class="row container-fluid m-0 p-0">'
			+'<div class="text-wrap pl-0 col-lg-6 col-sm-12" style="word-wrap:normal;">'
				+'<p>Javascript has this controversial reputation due to some of the weird syntax, but it\'s undoubtedly one of the most widely used web tech nowadays.</p>'
			+'</div>'
			+'<div class="col-lg-6 col-sm-12"><div class="d-flex justify-content-center">'
				+'<img src="https://i.kym-cdn.com/photos/images/newsfeed/001/518/000/4bc.jpg" alt="javascript meme" width="75%">'
			+'</div>'
			+'</div>');

		//=============== SECTION DIVIDER ===============//
		let historyDiv = document.getElementById("Purpose & evolution");
		historyDiv.insertAdjacentHTML('beforeend', 
			'<p>There is no Javascript in the earlier stage of the web ecosystem, and suddenly people realised they want something that makes the website more dynamic, that leads to the creation of Javascript. The initial intention was to make it based on well-known language Java and C.</p>'
			+'<p>In 1995, Brendan Eich put together Javascript core, at the time called Mocha, expand the web browser function further.<br>It then been renamed and standardised by ECMA (European Computer Manufacturer Association), nowadays the regularly referred ES8 for example means ECMAScript version 8, it is the guideline for implement Javascript.</p>'
			+'<p>More associated technology such as JQuery, Chrome browser V8 engine, NodeJS and some more frameworks emerged post 2000s and broaden the task which JS can do.</p>');

		//=============== SECTION DIVIDER ===============//
		let ajaxDiv = document.getElementById("AJAX");
		ajaxDiv.insertAdjacentHTML('beforeend', 
			'<div style="position: relative; left: 0; top: 0;">'
			+'<img src="https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/pL8AAOSwIZJeEtL0/$_57.JPG?set_id=8800005007" alt="ajax" width=300px style="position:relative;z-index: 1;">'
			+'<img src="https://cdn.onlinewebfonts.com/svg/img_574496.png" alt="cross" width=300px style="position:absolute;left:0;top:0;z-index:2;">'
			+'</div>'
			+'<span>Not this AJAX...</span>'
			+'<p>AJAX stands for Asynchronous JavaScript and XML(despite the fact that nowadays we use JSON more). It\'s a technique that allows user to send a request and carry on, and deal with the response later on when have one.</p>'
			+'<p>With AJAX, users no longer need to constantly do reload to see the update.</p>');

		ajaxDiv.insertAdjacentHTML('beforeend',
			'<em>Example: try to search your favourite movie below</em><br>'
			+'<input type="text" id="search" name="movieSearchKeyword" value="back to the future">'
			+'<button type="button" onclick=loadAJAX(document.getElementById("search").value);>Submit</button>'
			+'<div id="result"></div>'
			);

		//=============== SECTION DIVIDER ===============//
		let domDiv = document.getElementById("DOM manipulation");
		domDiv.insertAdjacentHTML('beforeend', '<p>In the previous simple AJAX demonstration, the code under the hood contains these steps:</p>'
			+'<ol>'
			+'<li>Set up the search bar and submit button in plain HTML, also create an empty div for later on display the result returned</li>'
			+'<li>Attach a Javascript function to the onclick event on the button</li>'
			+'<li>Upon click, send request to <a href="https://developers.themoviedb.org/4/getting-started/authorization">The Movie Database API</a></li>'
			+'<li>Convert the response to JSON (Javascript Object Notation) for easy access</li>'
			+'<li>Extract information from the result array, create HTML to accommodate the information</li>'
			+'<li>Append the element to the div prepared beforehand, this step uses Javascript to modify DOM structure</li>'
			+'<li>TA-DAA!! There it comes a simple movie search engine :D</li>'
			+'</ol');


		//=============== SECTION DIVIDER ===============//
		let resourcesDiv = document.getElementById("Resources");
		resourcesDiv.insertAdjacentHTML('beforeend', 
			'<ul>'
			+'<li><a href="https://dev.to/codediodeio/the-weird-history-of-javascript-2bnb">The Weird History of JavaScript </a></li>'
			+'<li><a href="https://medium.com/@madasamy/javascript-brief-history-and-ecmascript-es6-es7-es8-features-673973394df4">JavaScript brief history and ECMAScript(ES6,ES7,ES8,ES9) features</a></li>'
			+'<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">Using Fetch</a></li>'
			//+'<li><a href=""></a></li>'
			+'</ul>');
		
	</script>

</body>
</html>